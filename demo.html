<!DOCTYPE html>  
<html>  
<head>  
<title>文件上传</title>  
<meta charset="utf-8"/>   
<link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="http://gyj.icbc.com.cn/resource/CDN/s3js/2.0.7/s3.min.js"></script>
<style>
    /* layout.css Style */
        .upload-drop-zone {
          height: 200px;
          border-width: 2px;
          margin-bottom: 20px;
        }

        /* skin.css Style*/
        .upload-drop-zone {
          color: #ccc;
          border-style: dashed;
          border-color: #ccc;
          line-height: 200px;
          text-align: center
        }
        .upload-drop-zone.drop {
          color: #222;
          border-color: #222;
        }
</style>
</head> 
<body>
<div class="container">
       <div class="panel panel-primary">  
        <div class="panel-heading" style="text-align: center;"><strong>上传文件</strong></div>
        <div class="panel-body">

          <!-- Standar Form -->
          <h4>请选择文件</h4>
          <form action="" method="post" enctype="multipart/form-data" id="js-upload-form">
            <div class="form-inline">
              <div class="form-group">
                <input type="file" name="files[]" id="js-upload-files" multiple>
              </div>
              <button type="submit" class="btn btn-sm btn-primary" id="js-upload-submit">上传</button>
            </div>
          </form>

          <!-- Drop Zone -->
          <h4>或者将文件拖拽到这里</h4>
          <div class="upload-drop-zone" id="drop-zone">
            文件显示
          </div>

          <!-- Progress Bar -->
          <div class="progress">
            <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;">
              <span class="sr-only">已上传 50% </span>
            </div>
          </div>

          <!-- Upload Finished -->
          <div class="js-upload-finished">
            <h3>已上传文件</h3>
            <div class="list-group">
              <a href="#" class="list-group-item list-group-item-success"><span class="badge alert-success pull-right">Success</span>image-01.jpg</a>
              <a href="#" class="list-group-item list-group-item-success"><span class="badge alert-success pull-right">Success</span>image-02.jpg</a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
        $(function(){

            var dropZone = document.getElementById('drop-zone');
            var uploadForm = document.getElementById('js-upload-form');

			let ary =['jpg','png','jpeg'];
            s3.setAllow(ary)

            var startUpload = function(files) {
                console.log( files)
                let fileUpload=files[0];
                let result= checkFile(fileUpload);
                let showImg = function(data){
                    const img = document.getElementByTagName('img')[0];
                    img.src = data;
                }

            }

            uploadForm.addEventListener('submit', function(e) {
                var uploadFiles = document.getElementById('js-upload-files').files;
                e.preventDefault()

                startUpload(uploadFiles)
            })

            dropZone.ondrop = function(e) {
                e.preventDefault();
                this.className = 'upload-drop-zone';

                startUpload(e.dataTransfer.files)
            }

            dropZone.ondragenter=function(){
            	console.log()
		       this.innerHTML="可以释放了";
		     
		     }
            dropZone.ondragover = function() {
                this.className = 'upload-drop-zone drop';
                return false;
            }

            dropZone.ondragleave = function() {
                this.className = 'upload-drop-zone';
                return false;
            }



        })
    </script>
</body>
</html>