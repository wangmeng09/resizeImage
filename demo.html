<!DOCTYPE html>  
<html>  
<head>  
<title>文件上传</title>  
<meta charset="utf-8"/>   
<link href="http://resource.gongyinju.com/resource/CDN/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
<script src="http://resource.gongyinju.com/resource/CDN/jquery/3.2.1/jquery.min.js"></script>
<script src="http://resource.gongyinju.com/resource/CDN/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="http://resource.gongyinju.com/resource/CDN/s3js/2.0.7/s3.js"></script><style>
    /* layout.css Style */
        .upload-drop-zone {
          height: 200px;
          border-width: 2px;
          margin-bottom: 20px;
        }

        /* skin.css Style*/
        .upload-drop-zone {
          color: #ccc;
          border-style: dashed;
          border-color: #ccc;
          line-height: 200px;
          text-align: center
        }
        .upload-drop-zone.drop {
          color: #222;
          border-color: #222;
        }
</style>
</head> 
<body>
<div class="container">
       <div class="panel panel-primary">  
        <div class="panel-heading" style="text-align: center;"><strong>上传文件</strong></div>
        <div class="panel-body">

          <!-- Standar Form -->
          <h4>请选择文件</h4>
          <form action="" method="post" enctype="multipart/form-data" id="js-upload-form">
            <div class="form-inline">
              <div class="form-group">
                <input type="file" name="files[]" id="js-upload-files" multiple>
              </div>
              <button type="submit" class="btn btn-sm btn-primary" id="js-upload-submit">上传</button>
            </div>
          </form>

          <!-- Drop Zone -->
          <h4>或者将文件拖拽到这里</h4>
          <div class="upload-drop-zone" id="drop-zone">
            文件显示
          </div>
        </div>
      </div>
    </div>
    <script>
        $(function(){

            var dropZone = document.getElementById('drop-zone');
            var uploadForm = document.getElementById('js-upload-form');

            var startUpload = function(files) {
            	                console.log(files[0])  
                let fileUpload=files[0];              
			     s3.upload('https://www.test.com/api/upload',fileUpload,{},function(res){

			       console.log(res)

			     })
		    }

		     //压缩后展示
		    // s3.imageCompress(fileUpload,0.92,showImg)

            // }

            uploadForm.addEventListener('submit', function(e) {
                var uploadFiles = document.getElementById('js-upload-files').files;
                e.preventDefault()

                startUpload(uploadFiles)
            })

            dropZone.ondrop = function(e) {
                e.preventDefault();
                this.className = 'upload-drop-zone';

                startUpload(e.dataTransfer.files)
            }

            dropZone.ondragenter=function(e){
		       this.innerHTML="可以释放了";
		     
		     }
            dropZone.ondragover = function() {
                this.className = 'upload-drop-zone drop';
                return false;
            }

            dropZone.ondragleave = function() {
                this.className = 'upload-drop-zone';
                return false;
            }



        })
    </script>
</body>
</html>